"use strict";(function(n,t){var i=n,r={urls:{xslStylesheet:"",xmlDocument:""},weightUnit:"lbs"};i.init=function(n){r.urls=n;document.addEventListener("DOMContentLoaded",function(){console.debug("DOM content loaded.");i.renderWorkout();console.debug("Initialized workoutDetails.")})};i.calculateExerciseInstanceTotalWeight=function(n){if(n==null)return 0;for(var f,i,r,e=0,u=n.getElementsByClassName("exercise-set"),t=0;t<u.length;t++)f=u[t],console.debug("Set: ".concat(t)),i=f.getElementsByClassName("weight")[0].textContent,console.debug("Weight: [".concat(i).concat("]")),r=f.getElementsByClassName("repetitions")[0].textContent,console.debug("Repetitions: [".concat(r).concat("]")),console.debug(parseInt(i)*parseInt(r)),e+=parseInt(i)*parseInt(r),console.debug(e);return e};i.formatDisplayWeight=function(n){var t=""+parseInt(n),i=t.replace(/\B(?=(\d{3})+(?!\d))/g,",");return i.concat(" ").concat(r.weightUnit)};i.renderWorkout=function(){var n=i.requestXmlAndXsl(),t=new XSLTProcessor,r;t.importStylesheet(n.xsl);document.getElementById("workout").innerHTML="";r=t.transformToFragment(n.xml,document);document.getElementById("workout").appendChild(r);i.renderTotalWeights()};i.renderTotalWeights=function(){for(var e=document.getElementsByClassName("exercise-instance"),t,r,u,o=0,f,n=0;n<e.length;n++)r=e[n],u=i.calculateExerciseInstanceTotalWeight(r),r.getElementsByClassName("exercise-set__total-weight")[0].textContent=i.formatDisplayWeight(u),o+=u;for(f=document.getElementsByClassName("workout__total-weight"),t=0;t<f.length;t++)f[t].textContent=i.formatDisplayWeight(o)};i.requestXmlAndXsl=function(){var i={xml:t,xsl:t},n=new XMLHttpRequest;return n.overrideMimeType("application/xml"),n.open("GET",r.urls.xmlDocument,!1),n.send(null),i.xml=n.responseXML,n.open("GET",r.urls.xslStylesheet,!1),n.send(null),i.xsl=n.responseXML,console.debug("Retrieved docs: "),console.debug(i),i}})(window.WorkoutsDetails=window.WorkoutsDetails||{});